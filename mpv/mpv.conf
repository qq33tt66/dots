# ~/.config/mpv/mpv.conf

#################################
#  Hardware & OS Configuration  #
#################################

# Video Output (VO)
# Use the modern, high-quality, libplacebo-based renderer.
# This is the best choice for Wayland and your powerful GPU.
vo=gpu-next

#gpu-context=wayland
# Audio Output (AO)
# Use the native PipeWire driver for low-latency audio on modern Arch.
ao=pipewire

# Hardware Video Decoding (HWDEC)
# Use VA-API for your AMD RX 6600. This offloads video decoding
# from your i3-12100F to the GPU, essential for 4K and AV1 content.
hwdec=vaapi
hwdec-codecs=all

# Specify the VA-API device (optional, but can be more robust)
# 'auto' usually works, but if you have issues, find your render
# node with 'ls /dev/dri/render*' (usually renderD128 for the dGPU)
# hwdec-device=/dev/dri/renderD128


########################
#  Quality & Upscaling #
########################

# Use the built-in high-quality profile for vo=gpu-next.
# This enables high-quality scalers (like spline64), dithering,
# and other enhancements without needing to set 10+ options.
profile=gpu-hq
# loop=inf

# Enable automatic HDR peak detection and compute.
# This greatly improves tone-mapping for HDR content on SDR displays.
hdr-compute-peak=yes

# Enable debanding to reduce color banding in lower-quality videos.
deband=yes

# Smooths motion interpolation (use with caution).
# This can introduce a "soap opera effect". Disable if you don't like it.
# You can toggle this with 'ctrl+v' by default if you add 'v' to input-conf.
# video-sync=display-resample

# Enable temporal dithering to reduce banding, especially on 8-bit monitors.
temporal-dither=yes


##########################
#  Cache & Buffering     #
##########################

# Enable caching, especially useful for network streams (yt-dlp)
cache=yes

# Set the cache size. 500MB is a good buffer for high-bitrate 4K.
demuxer-max-bytes=500M
demuxer-max-back-bytes=100M


###############################
#  Quality of Life & Subtitles  #
###############################

# Save playback position when you quit
save-position-on-quit=yes

# Keep the window open after the video finishes
keep-open=yes

# Don't let huge videos (e.g., 4K) open larger than 90% of your screen
autofit-larger=90%x90%

# Instantly open the window instead of waiting for the file to load
force-window=immediate

# Don't use the simple OSD bar; the bottom OSC (On-Screen Controller) is better
osd-bar=no

# Set a default volume (70%)

# Allow volume to be boosted up to 130%
volume-max=130

# Automatically load external subtitles with similar filenames
sub-auto=fuzzy

# A good default font and size
sub-font="Noto Sans"
sub-font-size=55
sub-border-size=2.5


#######################
#  Screenshots       #
#######################

# Save screenshots in a dedicated folder as high-quality PNGs
screenshot-format=png
screenshot-dir=~/Pictures/mpv/
